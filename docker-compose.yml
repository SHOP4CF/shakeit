version: '3.8'
services:
  # Contex broker
  orion:
      image: fiware/orion-ld
      hostname: orion
      container_name: fiware-orion
      depends_on:
          - mongo-db
      networks:
          - default
      ports:
          - "1026:1026"
      command: -dbhost mongo-db -logLevel DEBUG
      healthcheck:
          test: curl --fail -s http://orion:1026/version || exit 1
  # Database
  mongo-db:
      image: mongo:4.2
      hostname: mongo-db
      container_name: db-mongo
      expose:
          - "27017"
      ports:
          - "27017:27017"
      networks:
          - default
      command: --nojournal
  # Shakeit service
  shakeitShop4cf:
    image: docker.ramp.eu/shop4cf/shakeit:1.0.0
    container_name: shakeitShop4cf
    environment: 
      - "DISPLAY=${DISPLAY_IP}:0.0"
  # Moni2
  moni2Shop4cf:
    image: docker.ramp.eu/shop4cf/moni2:1.0.0
    container_name: moni2Shop4cf
    environment: 
      - "DISPLAY=${DISPLAY_IP}:0.0"
    user: qtuser